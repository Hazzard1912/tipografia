---
import gsap from "gsap";
---

<section id="cta-final" class="py-24 relative overflow-hidden bg-white">
    <!-- Subtle background pattern -->
    <div class="absolute inset-0 opacity-5">
        <div class="absolute right-0 top-0 w-64 h-64 bg-neutral-dark rounded-full filter blur-3xl -mr-32 -mt-32"></div>
        <div class="absolute left-0 bottom-0 w-80 h-80 bg-primary rounded-full filter blur-3xl -ml-40 -mb-40"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10">
        <div class="flex flex-col lg:flex-row items-center gap-16 max-w-7xl mx-auto">
            <!-- Left content -->
            <div class="lg:w-1/2 text-left">
                <span class="bg-primary-light text-primary px-4 py-1 rounded-full text-sm font-medium mb-6 inline-block">SERVICIO RÁPIDO</span>
                
                <h2 class="font-heading text-4xl md:text-5xl lg:text-5xl font-bold text-neutral-dark mb-6 leading-tight">
                    ¿Necesitas imprimir <span class="text-primary">ahora</span>?
                </h2>
                
                <p class="font-sans text-lg text-neutral mb-8 max-w-2xl">
                    Obtén una cotización instantánea vía WhatsApp y recibe asesoría personalizada para tu proyecto de impresión.
                </p>
                
                <a
                    href="https://wa.me/573001234567"
                    target="_blank"
                    rel="noopener"
                    class="whatsapp-button flex items-center gap-3 bg-primary hover:bg-primary-dark text-white py-3 px-7 rounded-lg text-lg font-medium transition-all duration-300 shadow-md group"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        class="group-hover:animate-bounce"
                        ><path
                            d="M20.52 3.48A12.07 12.07 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.11.55 4.16 1.6 5.97L0 24l6.22-1.63A12.13 12.13 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.21-1.25-6.22-3.48-8.52zM12 22c-1.77 0-3.5-.46-5.01-1.33l-.36-.21-3.69.97.99-3.59-.23-.37A9.94 9.94 0 0 1 2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10zm5.2-7.8c-.28-.14-1.65-.81-1.9-.9-.25-.09-.43-.14-.61.14-.18.28-.7.9-.86 1.08-.16.18-.32.2-.6.07-.28-.14-1.18-.44-2.25-1.41-.83-.74-1.39-1.65-1.55-1.93-.16-.28-.02-.43.12-.57.13-.13.28-.34.42-.51.14-.17.18-.29.28-.48.09-.19.05-.36-.02-.5-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.36-.01-.56-.01-.19 0-.5.07-.76.34-.26.27-1 1-.99 2.43.01 1.43 1.03 2.81 1.18 3.01.15.2 2.03 3.1 4.93 4.23.69.3 1.23.48 1.65.61.69.22 1.32.19 1.82.12.56-.08 1.65-.67 1.88-1.32.23-.65.23-1.2.16-1.32-.07-.12-.25-.19-.53-.33z"
                        ></path></svg
                    > 
                    <span>Cotiza por WhatsApp</span>
                </a>
                
                <p class="text-neutral mt-5 text-sm">Respuesta en menos de 15 minutos</p>
            </div>
            
            <!-- Right content - testimonial card -->
            <div class="lg:w-1/2">
                <div class="bg-neutral-light p-8 rounded-xl shadow-sm border border-neutral-light/80">
                    <div class="flex items-center gap-4 mb-5">
                        <img 
                            src="https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=1000&auto=format&fit=crop" 
                            alt="Cliente satisfecho" 
                            class="w-14 h-14 rounded-full object-cover"
                        />
                        <div>
                            <h4 class="text-neutral-dark font-bold text-lg">Laura Gómez</h4>
                            <p class="text-neutral text-sm">Diseñadora Gráfica</p>
                        </div>
                    </div>
                    <p class="text-neutral mb-5 text-base">
                        "Increíble servicio y atención personalizada. En menos de una hora tenía mi cotización y todas mis preguntas resueltas. El resultado final superó mis expectativas."
                    </p>
                    <div class="flex gap-1">
                        {[...Array(5)].map(() => (
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-accent" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                        ))}
                    </div>
                </div>
                
                <div class="mt-6 flex items-center gap-3 text-neutral justify-center lg:justify-end">
                    <div class="flex items-center gap-2">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            fill="currentColor"
                            class="text-primary"
                            viewBox="0 0 24 24"
                            ><path
                                d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"
                            ></path></svg
                        >
                        <span class="text-sm text-neutral">San Nicolás, Cali - Cra. 8 #21-45</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    if (typeof window !== "undefined") {
        import("gsap").then(({ default: gsap, ScrollTrigger }) => {
            gsap.registerPlugin(ScrollTrigger);
            
            // Main section animation
            gsap.from("#cta-final", {
                scrollTrigger: {
                    trigger: "#cta-final",
                    start: "top 85%",
                },
                y: 40,
                opacity: 0,
                duration: 0.8,
                ease: "power2.out",
            });
            
            // Button animation on hover
            const whatsappBtn = document.querySelector('.whatsapp-button');
            if (whatsappBtn) {
                whatsappBtn.addEventListener("mouseenter", () => {
                    gsap.to(whatsappBtn, {
                        scale: 1.03,
                        duration: 0.2,
                        ease: "power1.out",
                    });
                });
                whatsappBtn.addEventListener("mouseleave", () => {
                    gsap.to(whatsappBtn, {
                        scale: 1,
                        duration: 0.2,
                        ease: "power1.in",
                    });
                });
            }
        });
    }
</script>
