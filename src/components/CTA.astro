---
import { Icon } from "astro-icon/components";
---

<section id="cta-final" class="py-24 relative overflow-hidden bg-white">
    <!-- Subtle background pattern -->
    <div class="absolute inset-0 opacity-5">
        <div
            class="absolute right-0 top-0 w-64 h-64 bg-neutral-dark rounded-full filter blur-3xl -mr-32 -mt-32"
        >
        </div>
        <div
            class="absolute left-0 bottom-0 w-80 h-80 bg-primary rounded-full filter blur-3xl -ml-40 -mb-40"
        >
        </div>
    </div>
    <div class="container mx-auto px-4 relative z-10">
        <div class="max-w-4xl mx-auto text-center">
            <!-- Badge -->
            <span
                class="bg-primary-light text-primary px-6 py-2 rounded-full text-sm font-medium mb-8 inline-block"
            >
                <Icon
                    name="clock-fast"
                    width="16"
                    height="16"
                    class="inline mr-2"
                />
                SERVICIO RÁPIDO
            </span>

            <!-- Main heading -->
            <h2
                class="font-heading text-4xl md:text-6xl lg:text-7xl font-bold text-neutral-dark mb-8 leading-tight"
            >
                ¿Necesitas imprimir <span class="text-primary">ahora</span>?
            </h2>

            <!-- Description -->
            <p class="font-sans text-xl text-neutral mb-12 max-w-3xl mx-auto">
                Obtén una cotización instantánea vía WhatsApp y recibe asesoría
                personalizada para tu proyecto de impresión.
            </p>

            <!-- CTA Button -->
            <div
                class="flex flex-col sm:flex-row items-center justify-center gap-6 mb-8"
            >
                <a
                    href="https://wa.me/573104336900?text=Hola,%20me%20gustaría%20cotizar%20un%20servicio%20de%20impresión."
                    target="_blank"
                    rel="noopener"
                    class="whatsapp-button inline-flex items-center gap-3 bg-primary hover:bg-primary-dark text-white py-4 px-8 rounded-full text-lg font-bold transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 group"
                >
                    <Icon
                        name="whatsapp"
                        width="24"
                        height="24"
                        class="group-hover:animate-bounce"
                    />
                    <span>Cotiza por WhatsApp</span>
                    <Icon
                        name="arrow-right"
                        width="18"
                        height="18"
                        class="transition-transform group-hover:translate-x-1"
                    />
                </a>

                <div class="flex items-center gap-3 text-neutral">
                    <Icon
                        name="clock-fast"
                        width="20"
                        height="20"
                        class="text-accent"
                    />
                    <span class="font-medium"
                        >Respuesta en menos de 15 minutos</span
                    >
                </div>
            </div>
            <!-- Features -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-16">
                <div
                    class="feature-card flex flex-col items-center text-center"
                >
                    <div class="bg-white p-4 rounded-full shadow-md mb-4">
                        <Icon
                            name="quality-high"
                            width="32"
                            height="32"
                            class="text-primary"
                        />
                    </div>
                    <h3
                        class="font-heading text-lg font-bold text-neutral-dark mb-2"
                    >
                        Alta Calidad
                    </h3>
                    <p class="text-neutral text-sm">
                        Materiales premium y acabados profesionales
                    </p>
                </div>

                <div
                    class="feature-card flex flex-col items-center text-center"
                >
                    <div class="bg-white p-4 rounded-full shadow-md mb-4">
                        <Icon
                            name="headphones"
                            width="32"
                            height="32"
                            class="text-accent"
                        />
                    </div>
                    <h3
                        class="font-heading text-lg font-bold text-neutral-dark mb-2"
                    >
                        Asesoría Personalizada
                    </h3>
                    <p class="text-neutral text-sm">
                        Te ayudamos a elegir la mejor opción
                    </p>
                </div>

                <div
                    class="feature-card flex flex-col items-center text-center"
                >
                    <div class="bg-white p-4 rounded-full shadow-md mb-4">
                        <Icon
                            name="map-marker"
                            width="32"
                            height="32"
                            class="text-secondary"
                        />
                    </div>
                    <h3
                        class="font-heading text-lg font-bold text-neutral-dark mb-2"
                    >
                        Ubicación Central
                    </h3>
                    <p class="text-neutral text-sm">
                        San Nicolás, Cali - Cra. 4 #20-12/14
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    if (typeof window !== "undefined") {
        import("gsap").then(({ default: gsap }) => {
            import("gsap/ScrollTrigger").then(({ default: ScrollTrigger }) => {
                gsap.registerPlugin(ScrollTrigger);

                // Main section animation
                gsap.from("#cta-final", {
                    scrollTrigger: {
                        trigger: "#cta-final",
                        start: "top 85%",
                    },
                    y: 40,
                    opacity: 0,
                    duration: 0.8,
                    ease: "power2.out",
                });

                // Features animation
                const featureCards = document.querySelectorAll(".feature-card");
                featureCards.forEach((card, i) => {
                    gsap.from(card, {
                        scrollTrigger: {
                            trigger: card,
                            start: "top 90%",
                        },
                        y: 30,
                        opacity: 0,
                        duration: 0.6,
                        delay: i * 0.15,
                        ease: "power2.out",
                    });
                });

                // Button animation on hover
                const whatsappBtn = document.querySelector(".whatsapp-button");
                if (whatsappBtn) {
                    whatsappBtn.addEventListener("mouseenter", () => {
                        gsap.to(whatsappBtn, {
                            scale: 1.05,
                            duration: 0.3,
                            ease: "power1.out",
                        });
                    });
                    whatsappBtn.addEventListener("mouseleave", () => {
                        gsap.to(whatsappBtn, {
                            scale: 1,
                            duration: 0.3,
                            ease: "power1.in",
                        });
                    });
                }
            });
        });
    }
</script>
