---
import { Image } from "astro:assets";
import logo from "../assets/logo.png";
---

<nav
    class="w-full fixed top-0 left-0 z-50 transition-all duration-300"
    id="navbar"
>
    <div class="container mx-auto px-6 flex items-center justify-between h-20">
        <!-- Logo/Brand -->
        <a
            href="/#inicio"
            class="flex items-center"
        >
            <Image
                src={logo}
                alt="José Albeiro Hernández Logo"
                class="w-36 h-14"
                width="500"
                height="500"
                format="webp"
                loading="eager"
                decoding="async"
                fetchpriority="high"
            />
        </a>

        <!-- Desktop Nav -->
        <ul
            class="hidden md:flex gap-8 items-center font-sans text-base font-medium"
        >
            <li>
                <a
                    href="/#inicio"
                    class="text-neutral-dark hover:text-primary relative py-2 px-1 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-primary after:transition-all after:duration-300 hover:after:w-full"
                    >Inicio</a
                >
            </li>
            <li>
                <a
                    href="/servicios/"
                    class="text-neutral-dark hover:text-primary relative py-2 px-1 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-primary after:transition-all after:duration-300 hover:after:w-full"
                    >Servicios</a
                >
            </li>
            <li>
                <a
                    href="/#por-que-elegirnos"
                    class="text-neutral-dark hover:text-primary relative py-2 px-1 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-primary after:transition-all after:duration-300 hover:after:w-full"
                    >Nosotros</a
                >
            </li>
            <li>
                <a
                    href="/#confianza"
                    class="text-neutral-dark hover:text-primary relative py-2 px-1 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-primary after:transition-all after:duration-300 hover:after:w-full"
                    >Clientes</a
                >
            </li>
            <li>
                <a
                    href="https://wa.me/573104336900?text=Hola,%20estoy%20interesado%20en%20sus%20servicios."
                    class="bg-primary text-white px-5 py-2 rounded-full hover:shadow-lg hover:bg-primary-dark transition-all duration-300"
                    >Contacto</a
                >
            </li>
        </ul>

        <!-- Mobile Hamburger -->
        <button
            id="navbar-toggle"
            class="md:hidden flex items-center p-2 rounded-full text-primary-dark hover:bg-gray-100 transition-all duration-200 focus:outline-none"
            aria-label="Abrir menú"
        >
            <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
                ><path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M4 6h16M4 12h16M4 18h16"></path></svg
            >
        </button>
    </div>

    <!-- Mobile Menu -->
    <div
        id="mobile-menu"
        class="md:hidden bg-white absolute top-20 left-0 w-full py-3 hidden shadow-lg transition-transform duration-300 border-t border-gray-100"
    >
        <div class="container mx-auto px-6 flex flex-col space-y-1">
            <a
                href="/#inicio"
                class="py-3 px-4 text-neutral-dark hover:text-primary hover:bg-gray-50 rounded-lg font-medium transition-all duration-200"
                >Inicio</a
            >
            <a
                href="/servicios/"
                class="py-3 px-4 text-neutral-dark hover:text-primary hover:bg-gray-50 rounded-lg font-medium transition-all duration-200"
                >Servicios</a
            >
            <a
                href="/#por-que-elegirnos"
                class="py-3 px-4 text-neutral-dark hover:text-primary hover:bg-gray-50 rounded-lg font-medium transition-all duration-200"
                >Nosotros</a
            >
            <a
                href="/#confianza"
                class="py-3 px-4 text-neutral-dark hover:text-primary hover:bg-gray-50 rounded-lg font-medium transition-all duration-200"
                >Clientes
            </a>
            <a
                href="https://wa.me/573104336900?text=Hola,%20estoy%20interesado%20en%20sus%20servicios."
                class="mt-3 py-3 px-4 bg-primary text-white rounded-lg font-medium text-center hover:bg-primary-dark transition-colors duration-300"
                >Contacto</a
            >
        </div>
    </div>
</nav>

<script>
    // Mobile menu functionality
    const toggle = document.getElementById("navbar-toggle");
    const menu = document.getElementById("mobile-menu");
    const navbar = document.getElementById("navbar");

    // Toggle mobile menu
    toggle?.addEventListener("click", () => {
        menu?.classList.toggle("hidden");
    });

    // Close mobile menu on link click
    const mobileLinks = menu?.querySelectorAll("a");
    mobileLinks?.forEach((link) => {
        link.addEventListener("click", () => {
            menu?.classList.add("hidden");
        });
    });

    // Close mobile menu on resize
    window.addEventListener("resize", () => {
        if (window.innerWidth >= 768) {
            menu?.classList.add("hidden");
        }
    });

    // Navbar scroll behavior
    window.addEventListener("scroll", () => {
        if (navbar) {
            if (window.scrollY > 20) {
                navbar.classList.add("shadow-md");
                navbar.classList.add("bg-white/95");
            } else {
                navbar.classList.remove("shadow-md");
                navbar.classList.remove("bg-white/95");
            }
        }
    });
</script>

<style>
    nav {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.8);
        letter-spacing: 0.015em;
    }

    @media (max-width: 768px) {
        #mobile-menu:not(.hidden) {
            animation: slideDown 0.3s ease-in-out;
        }
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
